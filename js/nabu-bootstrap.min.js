function nbBootstrapTables(t){var a=$(t).find('[data-toggle="nabu-table"]');a.length>0&&nabu.loadLibrary("Table",function(){a.nabuTable()})}function nbBootstrapTrees(t){var a=$(t).find('[data-toggle="nabu-tree"]');a.length>0&&nabu.loadLibrary("Tree",function(){a.nabuTree()})}function nbBootstrapForms(t){var a=$(t).find('form[data-toggle="nabu-form"]');a.length>0&&nabu.loadLibrary("Form",function(){a.nabuForm()})}function nbBootstrapSelects(t){var a=$(t).find('[data-toggle="nabu-select"]');a.length>0&&nabu.loadLibrary("Select",function(){a.nabuFormSelect()})}function nbBootstrapTabLinks(t){$(t).find('[data-toggle="nabu-tab-link"]').nabuTabLink()}function nbBootstrapTabPersistence(t){var a=$(t).find('[data-toggle="tab-persistence"]');a.length>0&&nabu.loadLibrary("Storage",function(){var t=new Nabu.Storage(!0);a.each(function(){var a=$(this).data("persistenceId");if(void 0!==a){var n=t.getValue("tabPersistence_"+a);void 0!==n&&$(this).find('[href="'+n+'"]').tab("show"),$(this).find('[data-toggle="tab"]').on("click",function(){void 0!==(n=$(this).attr("href"))&&t.setValue("tabPersistence_"+a,n)})}})})}function nbBootstrapSplitPanels(t){$(t).find('[data-toggle="nabu-split-panels"]').nabuSplitPanels()}function nbBootstrapMultiForms(t){$(t).find('[data-toggle="nabu-multiform"]').nabuMultiForm()}function nbBootstrapModals(t){$(t).find('[data-toggle="nabu-modal"]').nabuModal()}function nbBootstrapDADs(t){var a=$(t).find('[data-toggle="nabu-drag-and-drop"]');a.length>0&&nabu.loadLibrary("DragAndDrop",function(){a.nabuDragAndDrop()})}function nbBootstrapLangSelectors(t){$(t).find('[data-toggle="nabu-lang-selector"]').nabuLangSelector()}function nbBootstrapInputGroups(t){var a=$(t).find('[data-toggle="nabu-input-group"]');a.length>0&&a.each(function(){var t=$(this);t.find('input[type="radio"]').on("change",function(){var a=$(this);a.closest("form").find('input[name="'+a.attr("name")+'"]').closest('[data-toggle="nabu-input-group"]').find("input,select,textarea,button").each(function(){$(this).attr("name")!==a.attr("name")&&($(this).addClass("disabled"),$(this).attr("disabled",!0))}),t.find("input,select,textarea,button").removeClass("disabled"),t.find("input,select,textarea,button").attr("disabled",!1)})})}function nbBootstrapReflect(t){$(t).find("[data-reflect]").nabuReflect()}function nbBootstrapToggleAll(t){nbBootstrapDADs(t),nbBootstrapSelects(t),nbBootstrapSplitPanels(t),nbBootstrapTabLinks(t),nbBootstrapTabPersistence(t),nbBootstrapInputGroups(t),nbBootstrapLangSelectors(t),nbBootstrapTables(t),nbBootstrapTrees(t),nbBootstrapForms(t),nbBootstrapReflect(t),nbBootstrapMultiForms(t),nbBootstrapModals(t),nabuBootstrap.runLoaders(t),$(t).find('[data-toggle="tab"]').on("shown.bs.tab",function(){$(window).resize()}),$(t).find('.box [data-toggle="box-maximize"]').on("click",function(){var t=$(this).closest(".box");1===t.length&&($(this).addClass("hide"),$("body").addClass("modal-open"),$("body").append('<div class="modal-backdrop fade in"></div>'),t.addClass("maximized"),$(this).siblings('[data-toggle="box-restore"]').removeClass("hide"))}),$(t).find('.box [data-toggle="box-restore"]').on("click",function(){var t=$(this).closest(".box");1===t.length&&($(this).addClass("hide"),$("body .modal-backdrop").remove(),$("body").removeClass("modal-open"),t.removeClass("maximized"),$(this).siblings('[data-toggle="box-maximize"]').removeClass("hide"))})}try{if(!Nabu)throw"Nabu Manager not loaded"}catch(t){throw"Nabu Manager not loaded"}Nabu.Bootstrap=function(){this.bootloaders=new Array},Nabu.Bootstrap.prototype={addLoader:function(t){"function"==typeof t&&this.bootloaders.push(t)},runLoaders:function(t){for(var a in this.bootloaders){(0,this.bootloaders[a])(t)}}};var nabuBootstrap=new Nabu.Bootstrap;$.fn.nabuTable=function(t){return this.each(function(){var a=$.extend({},$.fn.nabuTable.defaults,t),n=$(this).data();a=$.extend({},a,n),this.nabuTable=new Nabu.UI.Table(this,a);var e=this;this.nabuTable.addEventListener(new Nabu.Event({onToolbarClick:function(t){t.params.action&&t.params.action.length>0?$(e).trigger("pressed."+t.params.action+".toolbar.table.nabu",t.params):$(e).trigger("pressed.toolbar.table.nabu",t.params)},onLoadEditor:function(t){nbBootstrapToggleAll("#"+t.params.container_id),e.nabuTable.connectForm(t.params.id,"#"+t.params.container_id+" form"),$(e).trigger("loaded.editor.table.nabu",t.params)},onShownEditor:function(t){$(e).trigger("shown.editor.table.nabu",t.params)}}))})},$.fn.nabuTable.defaults={tablePager:!0,tableSize:10,api:null,editor:null,editorMode:"page",editButton:"line"},$.fn.nabuTree=function(t){return this.each(function(){var a=$.extend({},$.fn.nabuTree.defaults,t),n=$(this).data();a=$.extend({},a,n),this.nabuTree=new Nabu.UI.Tree(this,a);var e=this;this.nabuTree.addEventListener(new Nabu.Event({onToolbarClick:function(t){t.params.action&&t.params.action.length>0?$(e).trigger("pressed."+t.params.action+".toolbar.tree.nabu",t.params):$(e).trigger("pressed.toolbar.tree.nabu",t.params)},onLoadEditor:function(t){nbBootstrapToggleAll("#"+t.params.container_id),e.nabuTree.connectForm(t.params_id,"#"+t.params.container_id+" form")}}))})},$.fn.nabuTree.defaults={api:null,editor:null,editorMode:"page",editorButton:"line"},$.fn.nabuForm=function(t){return this.each(function(){var a=$.extend({},$.fn.nabuForm.defaults,t),n=$(this).data();$.extend(a,n);var e=new Nabu.UI.Form(this,a),o=this;e.addEventListener(new Nabu.Event({onBeforeSubmit:function(t){return $(o).trigger("beforesubmit.form.nabu")},onSubmit:function(t){var a=$(o).data();if(a.actionTemplate&&a.actionTemplate.length>0){var n=a.actionTemplateField&&a.actionTemplateField.length>0?a.actionTemplateField:"id";t.params.response.json.data&&t.params.response.json.data[n]&&$(o).data("id",t.params.response.json.data[n])}return $(o).trigger("response.form.nabu",t.params)},onValidateField:function(t){return $(o).trigger(t.params.name+".validate.form.nabu",t.params),t.params.status},onError:function(t){return $(o).trigger("error.form.nabu",t.params)}})),n.modalReset&&"yes"==n.modalReset.toLowerCase()&&$(this).closest(".modal").on("show.bs.modal",function(){e.reset()}),n.modalSynchro&&"yes"==n.modalSynchro.toLowerCase()&&$(this).closest(".modal").on("shown.bs.modal",function(){e.validateForm()})})},$.fn.nabuForm.defaults={evaluate:!1,validation:!1,reflection:null,ajax:!1,ajax_target:null,ajax_on_upload_progress:null,ajax_onload:null},$.fn.nabuFormSelect=function(t){return this.each(function(){if("string"==typeof t)switch(t){case"clearSelection":void 0!==this.nabuSelect&&this.nabuSelect.clearSelection();break;default:console.log("nabuFormSelect unsupported option ["+t+"]")}else{var a=$.extend({},$.fn.nabuFormSelect.defaults,t),n=$(this).data();a=$.extend({},a,n);var e=new Nabu.UI.Select(this,a);this.nabuSelect=e}})},$.fn.nabuFormSelect.defaults={},$.fn.nabuTabLink=function(t){return this.each(function(){var a=$.extend({},$.fn.nabuTabLink.defaults,t),n=$(this).data();a=$.extend({},a,n),$(this).on("click",function(t){var a=$($(this).data("tags"));if(a.length>0){var n=a.find('[href="'+$(this).attr("href")+'"]');n.length>0&&(t.preventDefault(),n.tab("show"))}})})},$.fn.nabuTabLink.defaults={},$.fn.nabuSplitPanels=function(t){return this.each(function(){var a=$.extend({},$.fn.nabuSplitPanels.defaults,t),n=$(this).data();a=$.extend({},a,n),$(this).on("mousedown",function(t){var a=t.originalEvent,n=null;if($(a.target).hasClass("split-separator"))n=a.target;else{var e=$(a.target).closest(".split-separator");e.length>0&&(n=e.get(0))}if(null!==n){var o=$(n).prev(".split-content");o.length>0&&(this._nabuCursorPosition={separator:n,x:t.clientX,y:t.clientY,dx:t.clientX-n.offsetWidth,dy:t.clientY-n.offsetHeight,w:o.get(0).offsetWidth,h:o.get(0).offsetHeight,pressed:!0}),t.preventDefault(),t.stopPropagation()}}).on("mousemove",function(t){var n=t.originalEvent;if(this._nabuCursorPosition&&this._nabuCursorPosition.pressed){target=this._nabuCursorPosition.separator;var e=$(target).prev(".split-content");if(e.length>0&&"horizontal"===a.splitDirection){var o=this._nabuCursorPosition.w+n.clientX-this._nabuCursorPosition.x;o<0&&(o=0),e.css({"flex-basis":o+"px","flex-grow":0,width:o+"px"}),$(window).resize()}t.preventDefault(),t.stopPropagation()}}).on("mouseout",function(t){var a=t.originalEvent.clientX,n=t.originalEvent.clientY,e=this.getBoundingClientRect();(a<=e.left||a>=e.right||n<=e.top||n>=e.bottom)&&this._nabuCursorPosition&&(this._nabuCursorPosition.pressed=!1)}).on("mouseup",function(t){this._nabuCursorPosition&&(this._nabuCursorPosition.pressed=!1)})})},$.fn.nabuSplitPanels.defaults={direction:"horizontal"},$.fn.nabuMultiForm=function(t){return this.each(function(){var a=$.extend({},$.fn.nabuMultiForm.defaults,t),n=$(this).data();a=$.extend({},a,n),$(this).find('[data-toggle="nabu-multiform-save"]').on("click",function(t){if("undefined"!=typeof CKEDITOR)for(var a in CKEDITOR.instances)CKEDITOR.instances[a].updateElement();var n=$(this).closest('[data-toggle="nabu-multiform"]'),e=n.find('form[data-toggle="nabu-form"][data-multiform-part]');if(e.length>0){var o=new Array;e.each(function(){this.nabuForm&&o.push($(this).data("multiform-part"))}),o.sort()}for(var r in o){n.find('form[data-toggle="nabu-form"][data-multiform-part="'+o[r]+'"]').each(function(){this.nabuForm.onSubmit(t.originalEvent)})}})})},$.fn.nabuMultiForm.defaults={},$.fn.nabuModal=function(t){return this.each(function(){})},$.fn.nabuModal.defaults={},$.fn.nabuDragAndDrop=function(t){if("string"!=typeof t)return this.each(function(){var a=this,n=$.extend({},$.fn.nabuDragAndDrop.defaultsContainer,t),e=$(this).data();n=$.extend({},n,e);var o=new Nabu.DragAndDrop.Container(this,n);$(this).find('[data-toggle="drop-container"]').each(function(){var t=$(this).data(),a=$.extend({},$.fn.nabuDragAndDrop.defaultsDrop,t);this.dropContainer=new Nabu.DragAndDrop.DropContainer(o,this,a)}),$(this).find('[data-toggle="drag-item"]').each(function(){var t=$(this).data(),n=$.extend({},$.fn.nabuDragAndDrop.defaultsDrag,t);this.dragItem=new Nabu.DragAndDrop.DragItem(o,this,n),this.dragItem.addEventListener(new Nabu.Event({beforeDragStart:function(t,n){return $(a).triggerHandler("nabu.DAD.beforeDragStart")}}))}),$(this).triggerHandler("nabu.DAD.afterInitContainer")})},$.fn.nabuDragAndDrop.defaultsContainer={},$.fn.nabuDragAndDrop.defaultsDrop={},$.fn.nabuDragAndDrop.defaultsDrag={},$.fn.nabuLangSelector=function(t){var a=function(t){var a=$(t.container).find("[lang].active").length;$(t.container).find("li[lang]").each(function(){var n=$(this).attr("lang"),e="string"==typeof t.target?$(t.target):$(document);$(this).hasClass("active")?(e.find('[data-toggle="toggable-lang"] [lang="'+n+'"]').removeClass("hide"),1===a&&e.find('[data-toggle="toggable-lang"] .flag[lang="'+n+'"]').addClass("hide")):e.find('[data-toggle="toggable-lang"] [lang="'+n+'"]').addClass("hide")})};if("string"!=typeof t)return this.each(function(){var n=$.extend({},$.fn.nabuLangSelector.defaults,t),e=$(this).data();n=$.extend(n,e),n.container=this,this.options=n,a(n),$(this).find("li[lang] > a").on("click",function(){var t=$(this).closest("li[lang]"),e=$(n.container).find("[lang].active").length;t.hasClass("active")?e>1&&(t.removeClass("active"),$(this).removeClass("btn-default").addClass("btn-link")):e<2&&(t.addClass("active"),$(this).removeClass("btn-link").addClass("btn-default")),a(n)})});"refresh"===t&&this.each(function(){a(this.options)})},$.fn.nabuLangSelector.defaults={},$.fn.nabuReflect=function(t){var a=function(t,a,n){$(t.reflect).each(function(){var t=this;if(this.hasAttribute("data-refresh")){var a=$.sprintf($(this).data("refresh"),n),e=new Nabu.Ajax.Connector(a,"GET");e.addEventListener(new Nabu.Event({onLoad:function(a){t.innerHTML=a.params.text,nabu.callJavaScript(t),nbBootstrapToggleAll(t)}})),e.execute()}})};return this.each(function(){var n=$.extend({},$.fn.nabuReflect.defaults,t),e=$(this).data();n=$.extend({},n,e),this.hasAttribute("data-toggle")&&"nabu-select"===$(this).data("toggle")&&this.hasAttribute("data-reflect")&&$(this).on("change.select.nabu",function(t,e){a(n,0,e.option)})})},$.fn.nabuReflect.defaults={},$(document).ready(function(){nbBootstrapToggleAll(document)});