$.fn.nabuTable=function(a){return this.each(function(){var b=$.extend({},$.fn.nabuTable.defaults,a);var c=$(this).data();b=$.extend({},b,c);this.nabuTable=new Nabu.UI.Table(this,b);var d=this;this.nabuTable.addEventListener(new Nabu.Event({onToolbarClick:function(f){if(f.params.action&&f.params.action.length>0){$(d).trigger("pressed."+f.params.action+".toolbar.table.nabu",f.params)}else{$(d).trigger("pressed.toolbar.table.nabu",f.params)}},onLoadEditor:function(f){nbBootstrapToggleAll($("#"+f.params.container_id));d.nabuTable.connectForm(f.params.id,"#"+f.params.container_id+" form")}}))})};$.fn.nabuTable.defaults={tablePager:true,tableSize:10,api:null,editor:null,editorMode:"page",editButton:"line"};function nbBootstrapTables(a){var b=$(a).find('[data-toggle="nabu-table"]');if(b.length>0){nabu.loadLibrary("Table",function(){b.nabuTable()})}}$.fn.nabuTree=function(a){return this.each(function(){var c=$.extend({},$.fn.nabuTree.defaults,a);var d=$(this).data();$.extend(c,d);var b=new Nabu.UI.Tree(this,c);var e=this;b.addEventListener(new Nabu.Event({onClick:function(f){$(e).trigger("click.tree.nabu",f.params.id)},onToggle:function(f){},onCancelSelection:function(f){}}))})};$.fn.nabuTree.defaults={};function nbBootstrapTrees(a){var b=$(a).find('[data-toggle="nabu-tree"]');if(b.length>0){nabu.loadLibrary("Tree",function(){b.nabuTree()})}}$.fn.nabuForm=function(a){return this.each(function(){var c=$.extend({},$.fn.nabuForm.defaults,a);var d=$(this).data();$.extend(c,d);var b=new Nabu.UI.Form(this,c);var e=this;b.addEventListener(new Nabu.Event({onBeforeSubmit:function(f){return $(e).trigger("beforesubmit.form.nabu")},onSubmit:function(h){var f=$(e).data();if(f.actionTemplate&&f.actionTemplate.length>0){var g=(f.actionTemplateField&&f.actionTemplateField.length>0?f.actionTemplateField:"id");if(h.params.response.json.data[g]){$(e).data("id",h.params.response.json.data[g])}}return $(e).trigger("response.form.nabu",h.params)}}))})};$.fn.nabuForm.defaults={evaluate:false,validation:false,reflection:null,ajax:false,ajax_target:null,ajax_on_upload_progress:null,ajax_onload:null};function nbBootstrapForms(a){var b=$(a).find('form[data-toggle="nabu-form"]');if(b.length>0){nabu.loadLibrary("Form",function(){b.nabuForm()})}}$.fn.nabuFormSelect=function(a){return this.each(function(){var c=$.extend({},$.fn.nabuFormSelect.defaults,a);var d=$(this).data();c=$.extend({},c,d);var b=new Nabu.UI.Select(this,c)})};$.fn.nabuFormSelect.defaults={tableSize:25,api:null,editor:null,editButton:"line"};function nbBootstrapSelects(a){var b=$(a).find('[data-toggle="nabu-select"]');if(b.length>0){nabu.loadLibrary("Select",function(){b.nabuFormSelect()})}}$.fn.nabuTabLink=function(a){return this.each(function(){var b=$.extend({},$.fn.nabuTabLink.defaults,a);var c=$(this).data();b=$.extend({},b,c);$(this).on("click",function(g){var f=$($(this).data("tags"));if(f.length>0){var d=f.find('[href="'+$(this).attr("href")+'"]');if(d.length>0){g.preventDefault();d.tab("show")}}})})};$.fn.nabuTabLink.defaults={};function nbBootstrapTabLinks(a){$(a).find('[data-toggle="nabu-tab-link"]').nabuTabLink()}$.fn.nabuSplitPanels=function(a){return this.each(function(){var b=$.extend({},$.fn.nabuSplitPanels.defaults,a);var c=$(this).data();b=$.extend({},b,c);$(this).on("mousedown",function(h){var f=h.originalEvent;var g=null;if($(f.target).hasClass("split-separator")){g=f.target}else{var d=$(f.target).closest(".split-separator");if(d.length>0){g=d.get(0)}}if(g!==null){var i=$(g).prev(".split-content");if(i.length>0){this._nabuCursorPosition={separator:g,x:h.clientX,y:h.clientY,dx:h.clientX-g.offsetWidth,dy:h.clientY-g.offsetHeight,w:i.get(0).offsetWidth,h:i.get(0).offsetHeight,pressed:true}}h.preventDefault();h.stopPropagation()}}).on("mousemove",function(g){var f=g.originalEvent;if(this._nabuCursorPosition&&this._nabuCursorPosition.pressed){target=this._nabuCursorPosition.separator;var h=$(target).prev(".split-content");if(h.length>0){if(b.splitDirection==="horizontal"){var d=this._nabuCursorPosition.w+f.clientX-this._nabuCursorPosition.x;if(d<0){d=0}h.css({"flex-basis":d+"px","flex-grow":0,width:d+"px"});$(window).resize()}}g.preventDefault();g.stopPropagation()}}).on("mouseout",function(g){var d=g.originalEvent.clientX;var h=g.originalEvent.clientY;var f=this.getBoundingClientRect();if(d<=f.left||d>=f.right||h<=f.top||h>=f.bottom){if(this._nabuCursorPosition){this._nabuCursorPosition.pressed=false}}}).on("mouseup",function(d){if(this._nabuCursorPosition){this._nabuCursorPosition.pressed=false}})})};$.fn.nabuSplitPanels.defaults={direction:"horizontal"};function nbBootstrapSplitPanels(a){$(a).find('[data-toggle="nabu-split-panels"]').nabuSplitPanels()}$.fn.nabuMultiForm=function(a){return this.each(function(){var b=$.extend({},$.fn.nabuMultiForm.defaults,a);var c=$(this).data();b=$.extend({},b,c);$(this).find('[data-toggle="nabu-multiform-save"]').on("click",function(l){if(CKEDITOR){for(var f in CKEDITOR.instances){CKEDITOR.instances[f].updateElement()}}var h=$(this).closest('[data-toggle="nabu-multiform"]');var d=h.find('form[data-toggle="nabu-form"][data-multiform-part]');if(d.length>0){var k=new Array();d.each(function(){if(this.nabuForm){k.push($(this).data("multiform-part"))}});k.sort()}for(var g in k){var j=h.find('form[data-toggle="nabu-form"][data-multiform-part="'+k[g]+'"]');j.each(function(){this.nabuForm.onSubmit(l.originalEvent)})}})})};$.fn.nabuMultiForm.defaults={};function nbBootstrapMultiForms(a){$(a).find('[data-toggle="nabu-multiform"]').nabuMultiForm()}$.fn.nabuDragAndDrop=function(a){return this.each(function(){var e=this;var c=$.extend({},$.fn.nabuDragAndDrop.defaults,a);var d=$(this).data();c=$.extend({},c,d);switch(c.type){case"item":var b=new Nabu.DragAndDrop.DragItem(this,c);b.addEventListener(new Nabu.Event({beforeDragStart:function(f,g){return $(e).triggerHandler("nabu.DAD.beforeDragStart")}}));break;case"container":var b=new Nabu.DragAndDrop.DropContainer(this,c);break}})};$.fn.nabuDragAndDrop.defaults={};function nbBootstrapDADs(a){var c=$(a).find('[data-toggle="drop-container"]');if(c.length>0){nabu.loadLibrary("DragAndDrop",function(){c.nabuDragAndDrop({type:"container"})})}var b=$(a).find('[data-toggle="drag-item"]');if(b.length>0){nabu.loadLibrary("DragAndDrop",function(){b.nabuDragAndDrop({type:"item"})})}}$.fn.nabuLangSelector=function(a){var b=function(d){var c=$(d.container).find("[lang].active").length;$(d.container).find("li[lang]").each(function(){var e=$(this).attr("lang");var f=typeof d.target==="string"?$(d.target):$(document);if($(this).hasClass("active")){f.find('[data-toggle="toggable-lang"] [lang="'+e+'"]').removeClass("hide");if(c===1){f.find('[data-toggle="toggable-lang"] .flag[lang="'+e+'"]').addClass("hide")}}else{f.find('[data-toggle="toggable-lang"] [lang="'+e+'"]').addClass("hide")}})};if(typeof(a)==="string"){if(a==="refresh"){this.each(function(){b(this.options)})}}else{return this.each(function(){var c=$.extend({},$.fn.nabuLangSelector.defaults,a);var d=$(this).data();c=$.extend(c,d);c.container=this;this.options=c;b(c);$(this).find("li[lang] > a").on("click",function(){var e=$(this).closest("li[lang]");var f=$(c.container).find("[lang].active").length;if(e.hasClass("active")){if(f>1){e.removeClass("active");$(this).removeClass("btn-default").addClass("btn-link")}}else{if(f<2){e.addClass("active");$(this).removeClass("btn-link").addClass("btn-default")}}b(c)})})}};$.fn.nabuLangSelector.defaults={};function nbBootstrapLangSelectors(a){var b=$(a).find('[data-toggle="nabu-lang-selector"]');b.nabuLangSelector()}function nbBootstrapInputGroups(b){var a=$(b).find('[data-toggle="nabu-input-group"]');if(a.length>0){a.each(function(){var c=$(this);c.find('input[type="radio"]').on("change",function(){var g=this;var d=$(this);var e=d.closest("form");var f=e.find('input[name="'+d.attr("name")+'"]');f.closest('[data-toggle="nabu-input-group"]').find("input,select,textarea,button").each(function(){if($(this).attr("name")!==d.attr("name")){$(this).addClass("disabled");$(this).attr("disabled",true)}});c.find("input,select,textarea,button").removeClass("disabled");c.find("input,select,textarea,button").attr("disabled",false)})})}}function nbBootstrapToggleAll(a){nbBootstrapDADs(a);nbBootstrapSelects(a);nbBootstrapSplitPanels(a);nbBootstrapTabLinks(a);nbBootstrapInputGroups(a);nbBootstrapLangSelectors(a);nbBootstrapTables(a);nbBootstrapTrees(a);nbBootstrapForms(a);nbBootstrapMultiForms(a);$(a).find('[data-toggle="tab"]').on("shown.bs.tab",function(){$(window).resize()});$(a).find('.box [data-toggle="box-maximize"]').on("click",function(){var b=$(this).closest(".box");if(b.length===1){$(this).addClass("hide");$("body").addClass("modal-open");$("body").append('<div class="modal-backdrop fade in"></div>');b.addClass("maximized");$(this).siblings('[data-toggle="box-restore"]').removeClass("hide")}});$(a).find('.box [data-toggle="box-restore"]').on("click",function(){var b=$(this).closest(".box");if(b.length===1){$(this).addClass("hide");$("body .modal-backdrop").remove();$("body").removeClass("modal-open");b.removeClass("maximized");$(this).siblings('[data-toggle="box-maximize"]').removeClass("hide")}})}$(document).ready(function(){nbBootstrapToggleAll(document)});