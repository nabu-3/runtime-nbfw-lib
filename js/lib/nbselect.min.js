try{if(!Nabu){throw"Nabu Manager not loaded"}}catch(e){throw"Nabu Manager not loaded"}if(typeof Nabu.UI==="undefined"){Nabu.UI=function(){}}Nabu.UI.Select=function(a,b){this.container=a;this.input=$(a).find('input[type="hidden"]');this.caption=$(a).find("button:first-child").get(0);this.params=b;this.init()};Nabu.UI.Select.prototype={init:function(){var c=this;if(this.input.length===1){$(this.container).find(".dropdown-menu [data-id]").off("click").on("click",function(d){c.selectItem($(this));var f=$(this).data("id");$(c.container).trigger("change.select.nabu",{option:f});d.preventDefault()})}if(this.input.length>0){var b=this.input.val();if(b.length>0){var a=$(this.container).find('.dropdown-menu [data-id="'+b+'"]');if(a.length>0){this.selectItem(a);$(this.container).trigger("init.select.nabu",{option:b})}else{this.clearSelection()}}else{this.clearSelection()}}else{this.clearSelection()}},selectItem:function(c){var d=c.data("id");this.input.val(d);var a=$(this.container).data("captionMask");var b=c.get(0).innerHTML;this.caption.innerHTML=(typeof a=="undefined"?b:$.sprintf(a,b));$(c).siblings(".active").removeClass("active");$(c).addClass("active")},clearSelection:function(){this.input.removeAttr("value");var a=$(this.container).data("captionDefault");this.caption.innerHTML=(typeof a=="undefined"?"":a);$(this.container).find(".dropdown-menu .active").removeClass("active")}};nabu.registerLibrary("Select",["Event","Ajax"]);