try{if(!Nabu){throw"Nabu Manager not loaded"}}catch(e){throw"Nabu Manager not loaded"}if(typeof Nabu.UI==="undefined"){Nabu.UI=function(){}}Nabu.UI.Tree=function(a,b){this.events=new Nabu.EventPool();this.container=a;this.params=b;this.init()};Nabu.UI.Tree.prototype={addEventListener:function(a){this.events.addEventListener(a)},removeEventListener:function(a){this.events.removeEventListener(a)},init:function(){var a=this;$(this.container).find(".nabu-tree-level > li > .tree-item").on("click",function(d){d.stopPropagation();var b=$(this.parentElement);$(a.container).find(".nabu-tree-level > li").removeClass("active");b.addClass("active");var c=b.data();a.events.fireEvent("onClick",a,{id:(typeof c.id==="undefined")?null:c.id});return false});$(this.container).find(".nabu-tree-level li > .tree-item .btn-toolbar > .btn-expand").on("click",function(d){d.stopPropagation();var b=$(this).closest("li");b.toggleClass("expanded");if(!b.hasClass("expanded")){b.find(".nabu-tree-level > li").removeClass("active");if($(a.container).find(".nabu-tree-level > li.active").length===0){a.events.fireEvent("onCancelSelection",a)}}var c=$(this.parentElement).data();a.events.fireEvent("onToggle",a,{id:(typeof c.id==="undefined")?null:c.id,expanded:b.hasClass("expanded")});return false});$(this.container).find('[data-toggle="drag-item"]').on("nabu.DAD.beforeDragStart",function(){console.log("nabu.DAD.beforeDragStart");return true})}};nabu.registerLibrary("Tree",["Event"]);